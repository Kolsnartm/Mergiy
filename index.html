<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mergiy</title>
  <link rel="stylesheet" href="style.css">

  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Mergiy">
  <link rel="apple-touch-icon" href="icon-192x192.png">

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2X1HK7Q6JE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-2X1HK7Q6JE');
  </script>

  <style>
    /* ... (–≤–∞—à CSS) ... */

    /* –°—Ç–∏–ª—ñ –µ–∫—Ä–∞–Ω—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è */
    #loadingScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 20; 
    }

    #loadingBar {
      width: 300px;
      height: 20px;
      background-color: #e0e0e0;
      border-radius: 10px;
      overflow: hidden; 
    }

    #loadingProgress {
      width: 0%; 
      height: 100%;
      background-color: #4CAF50;
      transition: width 0.3s ease-in-out; /* –î–æ–¥–∞—î–º–æ –ø–ª–∞–≤–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ —à–∏—Ä–∏–Ω–∏ */
    }

    #loadingText {
      margin-top: 10px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <!-- –ï–∫—Ä–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è -->
  <div id="loadingScreen">
    <div id="loadingBar">
      <div id="loadingProgress"></div>
    </div>
    <div id="loadingText">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è... 0%</div>
  </div>

  <canvas id="gameCanvas"></canvas>

  <div id="gameOverScreen">
    <h2>Game Over</h2>
    <p>Score: <span id="finalScore"></span> üí∞</p>
    <p>Time: <span id="finalTime"></span> sec</p> 
    <button id="restartButton">Try again!</button>
  </div>

  <div id="gameStartScreen" class="background-blur"></div> 
  <button id="startButton">Press to Start</button> 

  <script src="howler.js"></script> 
  <script src="script.js"></script> 

  <script>
    // ... (–≤–∞—à JavaScript –∫–æ–¥ –∑ script.js) ...

    // –û—Ç—Ä–∏–º—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –µ–∫—Ä–∞–Ω—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    const loadingScreen = document.getElementById('loadingScreen');
    const loadingProgress = document.getElementById('loadingProgress');
    const loadingText = document.getElementById('loadingText');

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    function updateLoadingProgress(progress) {
      loadingProgress.style.width = `${progress}%`;
      loadingText.textContent = `–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è... ${progress}%`;
    }

    // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ –æ–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–æ–≥—Ä–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    Promise.all([
      new Promise(resolve => {
        grassImg.onload = resolve;
        updateLoadingProgress(33); 
      }),
      new Promise(resolve => {
        background.img.onload = resolve;
        updateLoadingProgress(66);
      }),
      new Promise(resolve => {
        superMushroomImg.onload = resolve;
        updateLoadingProgress(100);
      })
    ]).then(() => {
      setTimeout(() => { 
        loadingScreen.style.display = 'none';
        canvas.classList.add('blurred');
        gameStartScreen.style.display = 'flex';
      }, 500); 
    });
  </script>

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/Mergiy/service-worker.js').then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
      }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
      });
    });
  }
</script>

</body>
</html>
